<?xml version="1.0" encoding="UTF-8"?>
<Patch>
                   

<!-- Fantasy Goblins -->

<!-- Add clay/sand/etc from other mods to Raw Clay Recipe -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Fantasy Goblins Updated</li>  <!-- here  -->
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>
        <li Class="PatchOperationConditional">
          <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/count[text()="60"]</xpath>
          <nomatch Class="PatchOperationAdd">
            <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients</xpath>
            <value>
              <li>
				<filter>
					<thingDefs>
						<li>GoblinMud</li>  <!-- here  -->
					</thingDefs>
				</filter>
				<count>60</count>
			  </li>
            </value>
          </nomatch>
          <match Class="PatchOperationAdd">
            <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/filter/thingDefs</xpath>
            <value>
				<li>GoblinMud</li>  <!-- here  -->
            </value>
          </match>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/fixedIngredientFilter/thingDefs</xpath>
            <value>
				<li>GoblinMud</li>  <!-- here  -->
            </value>
        </li>
	  </operations>
    </match>
  </Operation>

<!-- Materials+ -->
<!-- Add clay/sand/etc from other mods to Raw Clay Recipe -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Materials+</li>  <!-- here  -->
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>
        <li Class="PatchOperationConditional">
          <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/count[text()="60"]</xpath>
          <nomatch Class="PatchOperationAdd">
            <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients</xpath>
            <value>
              <li>
				<filter>
					<thingDefs>
						<li>AM_RawMud</li>  <!-- here  -->
						<li>AM_RawClay</li>
					</thingDefs>
				</filter>
				<count>60</count>
			  </li>
            </value>
          </nomatch>
          <match Class="PatchOperationAdd">
            <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/filter/thingDefs</xpath>
            <value>
				<li>AM_RawMud</li>  <!-- here  -->
				<li>AM_RawClay</li>
            </value>
          </match>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/fixedIngredientFilter/thingDefs</xpath>
            <value>
				<li>AM_RawMud</li>  <!-- here  -->
				<li>AM_RawClay</li>
            </value>
        </li>
	  </operations>
    </match>
  </Operation>

	<Operation Class="PatchOperationFindMod">
        <success>Always</success>
        <mods>
          <li>Materials+</li>
        </mods>
        <match Class="PatchOperationSequence">			
            <operations>
                <li Class="PatchOperationReplace">					
		          <xpath>Defs/RecipeDef[defName="AM_BakeClayBrick"]/ingredients</xpath>
		            <value>
					  <ingredients>
						<li>
							<filter>
								<thingDefs>
									<li>VBY_ClayPaste</li>
								</thingDefs>
							</filter>
							<count>10</count>
						</li>
					  </ingredients>	
		            </value>
				</li>
                <li Class="PatchOperationAdd">					
		          <xpath>Defs/RecipeDef[defName="AM_BakeClayBrick"]/recipeUsers</xpath>
		            <value>
					  <li>VBY_PrimitiveKiln</li>
					  <li>VBY_PrimitiveKiln_Rotated</li>
		            </value>
				</li>
                <li Class="PatchOperationReplace">					
		          <xpath>Defs/RecipeDef[defName="AM_BakeClayBrickBulk"]/ingredients</xpath>
		            <value>
					  <ingredients>
						<li>
							<filter>
								<thingDefs>
									<li>VBY_ClayPaste</li>
								</thingDefs>
							</filter>
							<count>100</count>
						</li>
					  </ingredients>	
		            </value>
				</li>
                <li Class="PatchOperationAdd">					
		          <xpath>Defs/RecipeDef[defName="AM_BakeClayBrickBulk"]/recipeUsers</xpath>
		            <value>
					  <li>VBY_PrimitiveKiln</li>
					  <li>VBY_PrimitiveKiln_Rotated</li>
		            </value>
				</li>
                <li Class="PatchOperationAdd">					
		          <xpath>Defs/RecipeDef[defName="AM_BakeMudBrick"]/recipeUsers</xpath>
		            <value>
						<li>VBY_PrimitiveKiln</li>
						<li>VBY_PrimitiveKiln_Rotated</li>
		            </value>
				</li>
				<li Class="PatchOperationAdd">					
		          <xpath>Defs/RecipeDef[defName="AM_BakeMudBrickBulk"]/recipeUsers</xpath>
		            <value>
						<li>VBY_PrimitiveKiln</li>
						<li>VBY_PrimitiveKiln_Rotated</li>
		            </value>
				</li>
			</operations>
        </match>
	</Operation>

<!-- Ceramics -->
<!-- Add clay/sand/etc from other mods to Raw Clay Recipe -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Ceramics</li>  <!-- here  -->
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>
        <li Class="PatchOperationConditional">
          <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/count[text()="60"]</xpath>
          <nomatch Class="PatchOperationAdd">
            <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients</xpath>
            <value>
              <li>
				<filter>
					<thingDefs>
						<li>N7_RawClay</li>  <!-- here  -->
					</thingDefs>
				</filter>
				<count>60</count>
			  </li>
            </value>
          </nomatch>
          <match Class="PatchOperationAdd">
            <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/filter/thingDefs</xpath>
            <value>
				<li>N7_RawClay</li>  <!-- here  -->
            </value>
          </match>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/fixedIngredientFilter/thingDefs</xpath>
            <value>
				<li>N7_RawClay</li>  <!-- here  -->
            </value>
        </li>
	  </operations>
    </match>
  </Operation>


  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Ceramics VEF</li>
    </mods>
	  <match Class="PatchOperationFindMod">
	  <success>Always</success>
		<mods>
		  <li>Fertile Fields [1.1]</li>
		</mods>
		  <nomatch Class="PatchOperationSequence">			
			<operations>
				<li Class="PatchOperationConditional">
				  <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/count[text()="60"]</xpath>
				  <nomatch Class="PatchOperationAdd">
					<xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients</xpath>
					<value>
					  <li>
						<filter>
							<thingDefs>
								<li>N7_RawClay</li>  <!-- here  -->
							</thingDefs>
						</filter>
						<count>60</count>
					  </li>
					</value>
				  </nomatch>
				  <match Class="PatchOperationAdd">
					<xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/filter/thingDefs</xpath>
					<value>
						<li>N7_RawClay</li>  <!-- here  -->
					</value>
				  </match>
				</li>
				<li Class="PatchOperationAdd">
				  <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/fixedIngredientFilter/thingDefs</xpath>
					<value>
						<li>N7_RawClay</li>  <!-- here  -->
					</value>
				</li>
			</operations>
		  </nomatch>
      </match>
  </Operation>

<!-- Add wet/raw bricks/clay from other mods to Adobe Brick Recipe -->
  <Operation Class="PatchOperationFindMod">
    <mods>
      <li>Ceramics</li>  <!-- here  -->
      <li>Ceramics VEF</li>
    </mods>
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>
        <li Class="PatchOperationAdd">
          <xpath>Defs/RecipeDef[defName="VBYMake_FiredAdobe"]/ingredients/li/filter/thingDefs</xpath>
            <value>
				<li>N7_UnfiredBrick</li>  <!-- here  -->
            </value>
        </li>
        <li Class="PatchOperationAdd">
          <xpath>Defs/RecipeDef[defName="VBYMake_FiredAdobe"]/fixedIngredientFilter/thingDefs</xpath>
            <value>
				<li>N7_UnfiredBrick</li>  <!-- here  -->
            </value>
        </li>
	  </operations>
    </match>
  </Operation>

	<Operation Class="PatchOperationFindMod">
        <success>Always</success>
        <mods>
          <li>Ceramics</li>
          <li>Ceramics VEF</li>
        </mods>
		<match Class="PatchOperationFindMod">
			<success>Always</success>
			<mods>
			  <li>Fertile Fields [1.1]</li>
			</mods>
			<nomatch Class="PatchOperationSequence">			
				<operations>
					<li Class="PatchOperationAdd">					
					  <xpath>Defs/RecipeDef[defName="Make_RawBricks"]/recipeUsers</xpath>
						<value>
						  <li>VBY_PrimitiveKiln</li>
						  <li>VBY_PrimitiveKiln_Rotated</li>
						  <li>VBY_PrimitiveCraftingTable</li>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="Make_RawBricks"]/ingredients</xpath>
						<value>
						  <ingredients>
							  <li>
							  <filter>
								  <thingDefs>
									 <li>VBY_ClayPaste</li>
								  </thingDefs>
							  </filter>
								<count>35</count>
							  </li>
							  <li>
								<filter>
									<thingDefs>
										<li>N7_Sand</li>
									</thingDefs>
								</filter>
								<count>20</count>
							  </li>		
							</ingredients>
						</value>
					</li>				
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="Make_RawBricks"]/fixedIngredientFilter</xpath>
						<value>
						  <fixedIngredientFilter>
							  <thingDefs>
								<li>VBY_ClayPaste</li>
								<li>N7_Sand</li>
							  </thingDefs>
							</fixedIngredientFilter>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="Make_RawBricks"]/workAmount</xpath>
						<value>
						  <workAmount>100</workAmount>
						</value>
					</li>
				</operations>
			</nomatch>
		</match>	
	</Operation>


<!-- Fertile Fields [1.1] -->
<!-- Add clay/sand/etc from other mods to Raw Clay Recipe -->

	<Operation Class="PatchOperationFindMod">
        <success>Always</success>
        <mods>
		  <li>Fertile Fields [1.1]</li>
        </mods>
		<match Class="PatchOperationFindMod">
			<success>Always</success>
			<mods>
			  <li>Ceramics</li>
			  <li>Ceramics VEF</li>
			</mods>
			  <nomatch Class="PatchOperationSequence">
				<operations>
					<li Class="PatchOperationConditional">
					  <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/count[text()="60"]</xpath>
					  <nomatch Class="PatchOperationAdd">
						<xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients</xpath>
						<value>
						  <li>
							<filter>
								<thingDefs>
									<li>RFFClay</li>  <!-- here  -->
								</thingDefs>
							</filter>
							<count>60</count>
						  </li>
						</value>
					  </nomatch>
					  <match Class="PatchOperationAdd">
						<xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/filter/thingDefs</xpath>
						<value>
							<li>RFFClay</li>  <!-- here  -->
						</value>
					  </match>
					</li>
					<li Class="PatchOperationInsert">
					  <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/ingredients/li/filter/thingDefs/li[text()="Hay"]</xpath>
						<value>
							<li>PlantScraps</li>  <!-- here  -->
						</value>
					</li>
					<li Class="PatchOperationAdd">
					  <xpath>Defs/RecipeDef[defName="VBY_MakeClumpsFromClay_Base"]/fixedIngredientFilter/thingDefs</xpath>
						<value>
							<li>RFFClay</li>  <!-- here  -->
							<li>PlantScraps</li>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="MakeBricks"]/label</xpath>
						<value>
						  <label>make 20 bricks</label>
						</value>
					</li>
					<li Class="PatchOperationAdd">					
					  <xpath>Defs/RecipeDef[defName="MakeBricks"]/recipeUsers</xpath>
						<value>
						  <li>VBY_PrimitiveKiln</li>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="MakeBricks"]/ingredients</xpath>
						<value>
						  <ingredients>
							  <li>
								<filter>
								  <thingDefs>
									 <li>VBY_ClayPaste</li>
								  </thingDefs>
								</filter>
								<count>20</count>
							  </li>
							</ingredients>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="MakeBricks"]/products/RFFBricks</xpath>
						<value>
						  <RFFBricks>20</RFFBricks>
						</value>
					</li>		
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="MakeBricks"]/fixedIngredientFilter</xpath>
						<value>
						  <fixedIngredientFilter>
							  <thingDefs>
								<li>VBY_ClayPaste</li>
							  </thingDefs>
							</fixedIngredientFilter>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="MakeFastBricks"]/label</xpath>
						<value>
						  <label>make 40 bricks</label>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="MakeFastBricks"]/ingredients</xpath>
						<value>
						  <ingredients>
							  <li>
							  <filter>
								  <thingDefs>
									 <li>VBY_ClayPaste</li>
								  </thingDefs>
							  </filter>
								<count>40</count>
							  </li>
							</ingredients>
						</value>
					</li>				
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="MakeFastBricks"]/fixedIngredientFilter</xpath>
						<value>
						  <fixedIngredientFilter>
							  <thingDefs>
								<li>VBY_ClayPaste</li>
							  </thingDefs>
							</fixedIngredientFilter>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="MakeBricks"]/products/RFFBricks</xpath>
						<value>
						  <RFFBricks>40</RFFBricks>
						</value>
					</li>
				</operations>
			  </nomatch>
			  <match Class="PatchOperationSequence">
				<operations>					
					<li Class="PatchOperationAdd">					
					  <xpath>Defs/RecipeDef[defName="Make_RawBricks"]/recipeUsers</xpath>
						<value>
						  <li>VBY_PrimitiveKiln</li>
						  <li>VBY_PrimitiveKiln_Rotated</li>
						  <li>VBY_PrimitiveCraftingTable</li>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="Make_RawBricks"]/ingredients</xpath>
						<value>
						  <ingredients>
							  <li>
							  <filter>
								  <thingDefs>
									 <li>VBY_ClayPaste</li>
								  </thingDefs>
							  </filter>
								<count>35</count>
							  </li>
							  <li>
								<filter>
									<thingDefs>
										<li>SandPile</li>
									</thingDefs>
								</filter>
								<count>20</count>
							  </li>		
							</ingredients>
						</value>
					</li>				
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="Make_RawBricks"]/fixedIngredientFilter</xpath>
						<value>
						  <fixedIngredientFilter>
							  <thingDefs>
								<li>VBY_ClayPaste</li>
								<li>SandPile</li>
							  </thingDefs>
							</fixedIngredientFilter>
						</value>
					</li>
					<li Class="PatchOperationReplace">					
					  <xpath>Defs/RecipeDef[defName="Make_RawBricks"]/workAmount</xpath>
						<value>
						  <workAmount>100</workAmount>
						</value>
					</li>
				</operations>
			  </match>
		</match>
	</Operation>	

<!--  =========================  Med Times  ========================  -->
	
	<Operation Class="PatchOperationFindMod">
        <success>Always</success>
        <mods>
          <li>Medieval Times Unofficial Update</li>
		  <li>Medieval Times Unofficial Update No Nan and legendary</li>
        </mods>
        <match Class="PatchOperationSequence">			
            <operations>
                <li Class="PatchOperationReplace">					
		          <xpath>Defs/RecipeDef[defName="MedTimes_MakeAdobeBricks"]/ingredients</xpath>
		            <value>
					  <ingredients>
						  <li>
						  <filter>
							  <thingDefs>
							     <li>VBY_ClayPaste</li>
							  </thingDefs>
						  </filter>
							<count>20</count>
						  </li>
						</ingredients>
		            </value>
				</li>
				<li Class="PatchOperationReplace">					
		          <xpath>Defs/RecipeDef[defName="MedTimes_MakeAdobeBricks"]/fixedIngredientFilter</xpath>
		            <value>
					  <fixedIngredientFilter>
						  <thingDefs>
							<li>VBY_ClayPaste</li>
						  </thingDefs>
						</fixedIngredientFilter>
		            </value>
				</li>
				<li Class="PatchOperationReplace">					
		          <xpath>Defs/RecipeDef[defName="MedTimes_MakeAdobeBricks"]/recipeUsers</xpath>
		            <value>
					  <recipeUsers>
						<li>VBY_PrimitiveKiln</li>
						<li>VBY_PrimitiveKiln_Rotated</li>
					  </recipeUsers>
		            </value>
				</li>
			</operations>
        </match>
	</Operation>


</Patch>