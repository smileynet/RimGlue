<?xml version="1.0" encoding="utf-8" ?>

<Patch>

  <Operation Class="PatchOperationFindMod">
    <mods>
        <li>Thinking Spot</li>
    </mods>
	<success>Always</success>
      <match Class="PatchOperationSequence">
		  <operations>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "TableSculpting"]/researchPrerequisites</xpath><!-- /li[text()="TS_Art"] -->
					<value>
						<li>VBY_PrimitiveProductionAdvanced</li>
					</value>    
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveKiln" or defName = "VBY_PrimitiveKiln_Rotated"]</xpath>
					<value>			
					  <researchPrerequisites>
						<li>TS_Art</li>
						<li>TS_Firemaking</li>
					  </researchPrerequisites>
					</value>    
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "TableButcher"]/researchPrerequisites</xpath><!--/li[text()="TS_PrimitiveButchering"]  -->
					<value>
						<li>VBY_PrimitiveProductionAdvanced</li>
					</value>    
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveButcherTable"]</xpath>
					<value>			
					  <researchPrerequisites>
						<li>TS_Butchering</li>
					  </researchPrerequisites>
					</value>    
			</li><!--
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName = "VBY_PrimitiveProductionAdvanced"]/prerequisites</xpath>
					<value>
						<li>TS_Art</li>
					</value>    
			</li>-->
		  </operations>   
      </match>
  </Operation>

  <Operation Class="PatchOperationFindMod">
    <mods>
		<li>Early Times</li>
    </mods>
	<success>Always</success>
      <match Class="PatchOperationSequence">
		  <operations>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "TableSculpting"]/researchPrerequisites</xpath><!-- /li[text()="TS_Art"] -->
					<value>
						<li>VBY_PrimitiveProductionAdvanced</li>
					</value>    
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveKiln" or defName = "VBY_PrimitiveKiln_Rotated"]</xpath>
					<value>			
					  <researchPrerequisites>
						<li>MedTimes_AdobeBricks</li>
						<li>TS_Firemaking</li>
					  </researchPrerequisites>
					</value>    
			</li><!--
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName = "VBY_PrimitiveProductionAdvanced"]/prerequisites</xpath>
					<value>
						<li>TS_Art</li>
					</value>    
			</li>-->
		  </operations>   
      </match>
  </Operation>
<!--
  <Operation Class="PatchOperationFindMod">
    <mods>
        <li>Thinking Spot</li>
    </mods>
	<success>Always</success>
      <match Class="PatchOperationSequence">
		  <operations>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName = "VBY_PrimitiveProductionAdvanced"]/prerequisites</xpath>
					<value>
						<li>TS_PrimitiveButchering</li>
					</value>    
			</li>
		  </operations>   
      </match>
  </Operation>-->

  <Operation Class="PatchOperationFindMod">
    <mods>
        <li>Thinking Spot</li>
		<li>Early Times</li>
    </mods>
	<success>Always</success>
      <match Class="PatchOperationSequence">
		  <operations>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName = "TS_MethodicalResearch"]/prerequisites</xpath>
					<value>
						<li>VBY_PrimitiveProductionAdvanced</li>
					</value>  
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName = "VBY_PrimitiveProduction"]</xpath>
					<value>
					  <prerequisites>
						<li>TS_Crafting</li>
					  </prerequisites>
					</value>  
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName = "VBY_PrimitiveTools"]/prerequisites</xpath>
					<value>
						<li>TS_PrimitiveWeapons</li>
					</value>  
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveBrewery_HerbalistBench"]</xpath>
					<value>
						<researchPrerequisites>
							<li>TS_Smokeleaf</li>
							<li>TS_Psychoid</li>
						</researchPrerequisites>
					</value>  
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveTailoringTable"]</xpath>
					<value>
						<researchPrerequisites>
							<li>TS_PrimitiveClothing</li>
						</researchPrerequisites>
					</value>  
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveStoneCuttingSpot"]</xpath>
					<value>
						<researchPrerequisites>
							<li>TS_Crafting</li>
						</researchPrerequisites>
					</value>  
			</li>
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveStoneCuttingTable"]/researchPrerequisites/li[text()="Stonecutting"]</xpath>
					<value>
						<li>TS_Roads</li>
					</value>  
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveMeleeWeaponTable"]</xpath>
					<value>
						<researchPrerequisites>
							<li>TS_PrimitiveWeapons</li>
						</researchPrerequisites>
					</value>  
			</li>
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveRangedWeaponTable"]</xpath>
					<value>
						<researchPrerequisites>
							<li>TS_PrimitiveWeapons</li>
						</researchPrerequisites>
					</value>  
			</li>
			<li Class="PatchOperationRemove">
				<xpath>Defs/ThingDef[defName = "VBY_PrimitiveResearchSpot"]</xpath>
			</li>
		  </operations>   
      </match>
  </Operation>

</Patch>