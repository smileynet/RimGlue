<?xml version="1.0" encoding="utf-8" ?>
<Patch>
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>[JDS] Simple Storage - Refrigeration</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!--ResearchDefs-->
                <li Class="PatchOperationAdd">
                    <xpath>Defs</xpath>
                    <value>
                        <ResearchProjectDef>
                            <defName>Fridges</defName>
                            <label>Advanced Refrigeration</label>
                            <description>Learn to build larger and more advanced refrigerators.</description>
                            <baseCost>1500</baseCost>
                            <techLevel>Industrial</techLevel>
                            <tab>DeepStorage</tab>
                            <prerequisites>
                                <li>BasicStorage</li>
                                <li>Machining</li>
                                <li>AirConditioning</li>
                            </prerequisites>
                            <researchViewX>3</researchViewX>
                            <researchViewY>2.5</researchViewY>
                        </ResearchProjectDef>
                    </value>
                </li>
                
                <li Class="PatchOperationFindMod">
                    <mods>
                        <li>[JDS] Simple Storage</li>
                    </mods>
                    <match Class="PatchOperationReplace">
                        <xpath>Defs/ResearchProjectDef[defName="Fridges"]/prerequisites</xpath>
                        <value>
                            <prerequisites>
                                <li>ModernStorage</li>
                                <li>Machining</li>
                                <li>AirConditioning</li>
                            </prerequisites>
                        </value>
                    </match>
                </li>
                
                
                <!--ThingDefs-->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="JDS_Refrigerator"]/researchPrerequisites</xpath>
                    <value>
                        <researchPrerequisites Inherit="false">
                            <li>Fridges</li>
                        </researchPrerequisites>
                    </value>
                </li>
                
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="JDS_IceBox"]/researchPrerequisites</xpath>
                    <value>
                        <researchPrerequisites Inherit="false">
                            <li>Fridges</li>
                        </researchPrerequisites>
                    </value>
                </li>
                
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="JDS_RefrigeratedBoxTrucks"]/researchPrerequisites</xpath>
                    <value>
                        <researchPrerequisites Inherit="false">
                            <li>Fridges</li>
                        </researchPrerequisites>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>